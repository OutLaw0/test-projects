!function(){"use strict";function e(){var e=document.createDocumentFragment(),t=function(e){return'<i class="material-icons">'.concat(e,"</i>")},n=function(e){return'<span class="special-key">'.concat(e,"</span>")},a=this.keyLayout.en;return this.properties.langRU&&(a=this.keyLayout.ru),a.forEach((function(a){var s=document.createElement("button"),i=-1!==["backspace","Del","enter","&#9658;","Close"].indexOf(a);switch(s.setAttribute("type","button"),s.classList.add("keyboard__key"),a){case"backspace":s.classList.add("keyboard__key--wide"),s.innerHTML=t("backspace");break;case"Ctrl":s.innerHTML=n("Ctrl");break;case"Alt":s.innerHTML=n("Alt");break;case"Tab":s.innerHTML=n("Tab");break;case"enter":s.classList.add("keyboard__key--wide"),s.innerHTML=t("keyboard_return");break;case"space":s.classList.add("keyboard__key--extra-wide"),s.innerHTML=t("space_bar");break;case"caps":s.classList.add("keyboard__key--wide","keyboard__key--activatable"),s.innerHTML=t("keyboard_capslock");break;case"Shift":s.classList.add("keyboard__key--wide","keyboard__key--activatable"),s.innerHTML=n("Shift");break;case"changeLang":s.classList.add("keyboard__key--dark"),s.innerHTML=t("language");break;case"Del":s.innerHTML=n("Del");break;case"Close":s.classList.add("keyboard__key--wide","keyboard__key--dark"),s.innerHTML=t("check_circle");break;default:s.innerHTML=a.toLowerCase()}e.appendChild(s),i&&e.appendChild(document.createElement("br"))})),e}function t(e,t){var n=this.textArea.selectionStart;switch(e){case"backspace":"mousedown"!=t&&"keydown"!=t||(this.properties.value=this.properties.value.slice(0,n-1)+this.properties.value.slice(n,this.properties.value.length),this._triggerEvent("oninput"),this.textArea.setSelectionRange(n-1,n-1));break;case"Ctrl":"keydown"==t&&(this.ctrl=!0),"keyup"==t&&(this.ctrl=!1);break;case"Alt":"keydown"==t&&this.ctrl&&(this._toggleLang(this.properties.langRU?"en":"ru"),this.properties.langRU=!this.properties.langRU);break;case"Tab":"mousedown"!=t&&"keydown"!=t||(this.properties.value=this.properties.value.slice(0,n)+"\t"+this.properties.value.slice(n,this.properties.value.length),this._triggerEvent("oninput"),this.textArea.setSelectionRange(n+1,n+1));break;case"keyboard_return":"mousedown"!=t&&"keydown"!=t||(this.properties.value=this.properties.value.slice(0,n)+"\n"+this.properties.value.slice(n,this.properties.value.length),this._triggerEvent("oninput"),this.textArea.setSelectionRange(n+1,n+1));break;case"space_bar":"mousedown"!=t&&"keydown"!=t||(this.properties.value=this.properties.value.slice(0,n)+" "+this.properties.value.slice(n,this.properties.value.length),this._triggerEvent("oninput"),this.textArea.setSelectionRange(n+1,n+1));break;case"keyboard_capslock":if("mousedown"==t||"keydown"==t){var a=this.elements.keys[29];this._toggleCapsLock(),a.classList.toggle("keyboard__key--active",this.properties.capsLock)}break;case"Shift":var s=this.elements.keys[42];"mousedown"!=t&&"keydown"!=t||(this._toggleShift(this.properties.langRU?"Shift_ru":"Shift_en"),s.classList.add("keyboard__key--active")),"keyup"!=t&&"mouseup"!=t||(this._toggleLang(this.properties.langRU?"ru":"en"),s.classList.remove("keyboard__key--active"));break;case"language":"mousedown"!=t&&"keydown"!=t||(this._toggleLang(this.properties.langRU?"en":"ru"),this.properties.langRU=!this.properties.langRU);break;case"Del":"mousedown"!=t&&"keydown"!=t||(this.properties.value=this.properties.value.substring(0,n)+this.properties.value.substring(n+1),this._triggerEvent("oninput"),this.textArea.setSelectionRange(n,n));break;case"check_circle":var i=this.elements.keys[54];"mousedown"!=t&&"keydown"!=t||(i.focus(),this.close(),this._triggerEvent("onclose"));break;default:"mousedown"!=t&&"keydown"!=t||(this.properties.value=this.properties.value.slice(0,n)+e+this.properties.value.slice(n,this.properties.value.length),this._triggerEvent("oninput"),this.textArea.setSelectionRange(n+1,n+1))}}function n(){localStorage.getItem("lang")&&"ru"==localStorage.getItem("lang")&&(this.properties.langRU=!0)}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw r}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var i={elements:{main:null,keysContainer:null,keys:[],textArea:null},eventHandlers:{oninput:null,onclose:null},properties:{value:"",capsLock:!1,ctrl:!1,langRU:!1},keyLayout:{en:["`","1","2","3","4","5","6","7","8","9","0","-","=","backspace","Tab","q","w","e","r","t","y","u","i","o","p","[","]","\\","Del","caps","a","s","d","f","g","h","j","k","l",";","'","enter","Shift","z","x","c","v","b","n","m",",",".","/","&#9650;","Close","Ctrl","changeLang","Alt","space","&#9668;","&#9660;","&#9658;"],ru:["ё","1","2","3","4","5","6","7","8","9","0","-","=","backspace","Tab","й","ц","у","к","е","н","г","ш","щ","з","х","ъ","\\","Del","caps","ф","ы","в","а","п","р","о","л","д","ж","э","enter","Shift","я","ч","с","м","и","т","ь","б","ю",".","&#9650;","Close","Ctrl","changeLang","Alt","space","&#9668;","&#9660;","&#9658;"],Shift_en:["~","!","@","#","$","%","^","&","*","(",")","_","+","backspace","Tab","Q","W","E","R","T","Y","U","I","O","P","{","}","|","Del","caps","A","S","D","F","G","H","J","K","L",":",'"',"enter","Shift","Z","X","C","V","B","N","M","<",">","?","&#9650;","Close","Ctrl","changeLang","Alt","space","&#9668;","&#9660;","&#9658;"],Shift_ru:["Ё","!",'"',"№",";","%",":","?","*","(",")","_","+","backspace","Tab","Й","Ц","У","К","Е","Н","Г","Ш","Щ","З","Х","Ъ","/","Del","caps","Ф","Ы","В","А","П","Р","О","Л","Д","Ж","Э","enter","Shift","Я","Ч","С","М","И","Т","Ь","Б","Ю",",","&#9650;","Close","Ctrl","changeLang","Alt","space","&#9668;","&#9660;","&#9658;"],keyboardOrder:["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace","Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","Delete","CapsLock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Enter","ShiftLeft","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","ArrowUp","Close","ControlLeft","MetaLeft","AltLeft","Space","ArrowLeft","ArrowDown","ArrowRight"]},init:function(){var t=this;n.call(i);var a=document.querySelector(".use-keyboard-input");this.textArea=a,this.elements.main=document.createElement("div"),this.elements.keysContainer=document.createElement("div"),this.elements.main.classList.add("keyboard","keyboard--hidden"),this.elements.keysContainer.classList.add("keyboard__keys"),this.elements.keysContainer.appendChild(e.call(i)),this.elements.keys=this.elements.keysContainer.querySelectorAll(".keyboard__key"),this.elements.main.addEventListener("mousedown",(function(e){e.preventDefault()}),!1),this.elements.main.appendChild(this.elements.keysContainer),document.body.firstElementChild.appendChild(this.elements.main),this.elements.main.addEventListener("mousedown",(function(e){t._handleKeyboard(e)})),this.elements.main.addEventListener("mouseup",(function(e){t._handleKeyboard(e)})),document.addEventListener("keydown",(function(e){t._handleKeyboard(e)})),document.addEventListener("keyup",(function(e){t._handleKeyboard(e)})),a.addEventListener("focus",(function(){t.open(a.value,(function(e){a.value=e}))})),a.focus()},_triggerEvent:function(e){"function"==typeof this.eventHandlers[e]&&this.eventHandlers[e](this.properties.value)},_handleKeyboard:function(e){e.stopPropagation&&e.stopPropagation();var n=e.code,a=e.type,s=this.keyLayout.keyboardOrder,r=this.elements.keys;if("keydown"==a||"keyup"==a){e.preventDefault();var o=s.find((function(e){return e===n}));if(!o)return;"keydown"==a&&r[s.indexOf(n)].classList.add("active"),"keyup"==a&&r[s.indexOf(n)].classList.remove("active");var l=r[s.indexOf(n)].textContent;t.call(i,l,a)}if(("mousedown"==a||"mouseup"==a)&&(e.target.classList.contains("keyboard__key")||e.target.classList.contains("material-icons")||e.target.classList.contains("special-key"))){var c=e.target.textContent;t.call(i,c,a)}},_toggleCapsLock:function(){this.properties.capsLock=!this.properties.capsLock;var e,t=a(this.elements.keys);try{for(t.s();!(e=t.n()).done;){var n=e.value;0===n.childElementCount&&(n.textContent=this.properties.capsLock?n.textContent.toUpperCase():n.textContent.toLowerCase())}}catch(e){t.e(e)}finally{t.f()}},_toggleLang:function(e){var t=this.keyLayout[e];if(this.elements.keys.forEach((function(e,n){0===e.childElementCount&&(e.innerHTML=t[n])})),this.properties.capsLock){var n,s=a(this.elements.keys);try{for(s.s();!(n=s.n()).done;){var i=n.value;0===i.childElementCount&&(i.textContent=i.textContent.toUpperCase())}}catch(e){s.e(e)}finally{s.f()}}},_toggleShift:function(e){var t=this.keyLayout[e];if(this.elements.keys.forEach((function(e,n){0===e.childElementCount&&(e.innerHTML=t[n])})),this.properties.capsLock){var n,s=a(this.elements.keys);try{for(s.s();!(n=s.n()).done;){var i=n.value;0===i.childElementCount&&(i.textContent=i.textContent.toLowerCase())}}catch(e){s.e(e)}finally{s.f()}}},open:function(e,t,n){this.properties.value=e||"",this.eventHandlers.oninput=t,this.eventHandlers.onclose=n,this.elements.main.classList.remove("keyboard--hidden")},close:function(){this.properties.value="",this.eventHandlers.oninput=oninput,this.eventHandlers.onclose=onclose,this.elements.main.classList.add("keyboard--hidden")}};window.addEventListener("DOMContentLoaded",(function(){var e,t;e=document.createElement("div"),t=document.createElement("footer"),e.classList.add("container"),document.body.appendChild(e),document.body.appendChild(t),e.insertAdjacentHTML("afterBegin",'<h1>Virtual Keyboard w/ Vanilla JS</h1>\n    <h3>Features</h3>\n    <ul>\n        <li>Vanilla JS with ES6 modules (<strong>no libraries required!</strong>)</li>\n        <li>Build: Webpack + Eslint (Airbnb plg)</li>\n        <li>Responsive styles</li>\n        <li>To switch language: <strong>press</strong> left ctrl + alt or <strong>click</strong> on <i class="material-icons">language</i> icon </li> \n    </ul>\n    <textarea name="keyboard_text" class="use-keyboard-input" rows="5" cols="35"></textarea>'),t.insertAdjacentHTML("afterBegin",'<div class="footer__container footer-copyright">\n    <div class="footer-copyright__element">\n        <p class="copyright">©</p>\n        <p class="year">2022</p>\n        <a class="github-username" href="https://github.com/OutLaw0" target="_blank" rel="noopener noreferrer">github</a>\n    </div>\n    <a href="https://rs.school/js/" class="rss" target="_blank"> Rolling Scopes School </a>\n</div>'),i.init()})),window.addEventListener("beforeunload",(function(){var e;e=i.properties.langRU?"ru":"en",localStorage.setItem("lang",e)}))}();